<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			*{
				margin: 0;
				padding: 0;
			}
			.box{
				float: left;
				padding:0 0 0 10px;
				
			}
			img{
				display: block;
				width: 180px;
				height: auto;
			}
			.picbox{				
				border: 20px solid white;
				border-radius: 10px;
				box-shadow: 0 0 5px #808080;
				width: 180px;
			}
			
			.hid{
				display:none;
			}
		</style>
	</head>
	<body>
		<div id="content">
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/1.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/2.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/3.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/4.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/5.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/6.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/7.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/8.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/9.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/1.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/2.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/3.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/4.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/5.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/6.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/7.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/8.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/1.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/2.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/3.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/4.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/5.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/6.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/7.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/8.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/9.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/1.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/2.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/3.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/4.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/5.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/6.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/7.jpg"/>
					
				</div>
				
			</div>
			
			<div class="box">
				<div class="picbox">
					<img src="img/waterfallpic/8.jpg"/>
					
				</div>
				
			</div>
			
			
			
			
			
			
		</div>
		<script type="text/javascript"src="js/jquery-1.7.2.min.js" ></script>
		<script type="text/javascript">
		var picarr=["img/waterfallpic/1.jpg","img/waterfallpic/2.jpg","img/waterfallpic/3.jpg","img/waterfallpic/4.jpg",
		"img/waterfallpic/5.jpg","img/waterfallpic/6.jpg","img/waterfallpic/7.jpg","img/waterfallpic/8.jpg","img/waterfallpic/9.jpg"
		,"img/waterfallpic/10.jpg","img/waterfallpic/11.jpg","img/waterfallpic/12.jpg","img/waterfallpic/13.jpg","img/waterfallpic/14.jpg"
		,"img/waterfallpic/15.jpg","img/waterfallpic/16.jpg","img/waterfallpic/17.jpg","img/waterfallpic/18.jpg","img/waterfallpic/19.jpg"
		,"img/waterfallpic/20.jpg","img/waterfallpic/21.jpg","img/waterfallpic/22.jpg","img/waterfallpic/23.jpg","img/waterfallpic/24.jpg"
		,"img/waterfallpic/25.jpg"];
		var arrindex=0;
		var num=Math.floor($(window).width()/$('.box').eq(0).outerWidth());
		var harr=[];
		
		
		 picposition();
		 $(window).scroll(function(){
		 	if(checkslide()){
		 		waterfall(picarr);
		 		function waterfall(arr){
		 		for (var i in arr){
		 		var $box=$('<div>').addClass('box');
		 		$box.appendTo($('#content'));
		 		var $picbox=$('<div>').addClass('picbox').appendTo($box);
		 		$('<img>').attr('src',arr[i]).appendTo($picbox);
		 		
		 		arrindex++;	
		 		picposition()
		 		
		 	}	
		 		}		 	
		 	}
		 });
		 
		 function picposition(){
		 	var boxeidth=$('.box').eq(0).outerWidth();
		 	$('#content').css({
		 		'width':boxeidth*num,
		 		'margin':'0 auto'
		 	})
		 	$('.box').each(function(i){
		 		
		 		var h=$(this).outerHeight();
		 		if(i<num){
		 			harr[i]=h;
		 			//console.log(harr)
		 		}else{
		 			var minh=Math.min.apply(null,harr);
		 			var minhindex=$.inArray(minh,harr);
		 			//console.log(minhindex)
		 			$(this).css({
		 				'position':'absolute',
		 				'top':minh+15+'px',
		 				'left':minhindex*$('.box').outerWidth()+30+'px'
		 			});
		 			harr[minhindex]+=$(this).outerHeight()+15
		 		}
		 		
		 	})
		 
		 	
		 }
		
		 function checkslide(){
		 	var tolheight=$(window).height()+$(window).scrollTop();
		 	var toheight=$('#content>div').last().get(0).offsetTop+Math.floor($('#content>div').height()/2);
		 	return(toheight<tolheight)?true:false;
		 };
		</script>
	</body>
</html>
